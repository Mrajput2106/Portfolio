<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Monster Shooter ‚Äî Mobile Friendly</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<style>
  html, body {
    height: 100%;
    margin: 0;
    background: #111;
    font-family: Arial, sans-serif;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  #phone {
    position: relative;
    width: 420px;
    height: 820px;
    max-width: 98vw;
    max-height: 98vh;
    background: #000;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 0 30px #000;
    display: flex;
    flex-direction: column;
  }
  #background {
    position: absolute;
    inset: 0;
    z-index: 1;
    background-image: url('https://i.ibb.co/sJ3x0LbS/c-HJpdm-F0-ZS9sci9pb-WFn-ZXMvd2-Vic2l0-ZS8y-MDIz-LTEy-L3-Jhd3-Bpe-GVsb2-Zma-WNl-OV9wa-G90b19v-Zl9h-X.webp');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
  }
  #gameArea {
    position: relative;
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 5;
  }
  canvas {
    background: transparent;
    width: 100%;
    height: 100%;
    display: block;
  }
  #highScore {
    position: absolute;
    top: 8px;
    right: 18px;
    z-index: 10;
    padding: 8px 12px;
    background: rgba(34, 34, 43, 0.7);
    color: #ffeb3b;
    font-weight: bold;
    font-size: 21px;
    border-radius: 10px;
    pointer-events: none;
    font-family: Arial, sans-serif;
  }
  #controls {
    height: 120px;
    min-height: 85px;
    width: 100%;
    background: transparent;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 6px;
    box-sizing: border-box;
    z-index: 10;
  }
  #fireBtn {
    width: 80px;
    height: 80px;
    background: #ff3333;
    border-radius: 999px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: bold;
    user-select: none;
    border: 3px solid rgba(255, 255, 255, 0.2);
    touch-action: none;
    cursor: pointer;
  }
  .moveBtn {
    width: 60px;
    height: 60px;
    background: #222;
    border-radius: 14px;
    border: 3px solid #555;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    user-select: none;
    touch-action: none;
    cursor: pointer;
  }
  #move {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }
  #leftRight {
    display: flex;
    gap: 6px;
  }
  .overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.66);
    z-index: 20;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .btn {
    padding: 16px 28px;
    background: #007aff;
    border-radius: 12px;
    font-size: 20px;
    cursor: pointer;
    margin-top: 20px;
    user-select: none;
  }
</style>
</head>
<body>
<div id="phone">
  <div id="background"></div>
  <div id="gameArea">
    <div id="highScore">High Score: 0</div>
    <canvas id="game" width="700" height="800"></canvas>
  </div>

  <!-- START SCREEN -->
  <div id="startScreen" class="overlay">
    <h2>MONSTER SHOOTER</h2>

    <p style="text-align:center; font-size:16px; opacity:0.9;">
      ‚≠ê <b>PC Controls</b><br>
      ‚Üê ‚Üí ‚Üë ‚Üì = Move<br>
      Left Mouse Button = Shoot
      <br><br>
      ‚≠ê <b>Mobile Controls</b><br>
      Touch Buttons = Move & Fire
    </p>

    <div id="startBtn" class="btn">START</div>
  </div>

  <!-- RETRY SCREEN -->
  <div id="retryScreen" class="overlay" style="display:none">
    <h2>GAME OVER</h2>
    <div id="retryBtn" class="btn">RETRY</div>
  </div>

  <!-- Controls -->
  <div id="controls">
    <div id="fireBtn">FIRE</div>
    <div id="move">
      <div id="up" class="moveBtn">‚ñ≤</div>
      <div id="leftRight">
        <div id="left" class="moveBtn">‚óÄ</div>
        <div id="right" class="moveBtn">‚ñ∂</div>
      </div>
      <div id="down" class="moveBtn">‚ñº</div>
    </div>
  </div>
</div>


<script>

/* --------------------------
      BACKGROUND MUSIC
   -------------------------- */

/* üéµ YOUR AUDIO FILE HERE  
   (Put file in your folder) */

const bgMusic = new Audio("assets/Space Shooter Template Music.mp3");
bgMusic.loop = true;
bgMusic.volume = 1.0;

function stopMusic() {
  bgMusic.pause();
  bgMusic.currentTime = 0;
}

function playMusic() {
  bgMusic.currentTime = 0;
  bgMusic.play();
}

/* -------------- GAME LOGIC ------------------- */

const W = 700, H = 800;

function fitCanvas() {
  let gameArea = document.getElementById('gameArea');
  let canvas = document.getElementById('game');
  let areaW = gameArea.clientWidth, areaH = gameArea.clientHeight;
  let scale = Math.min(areaW / W, areaH / H);
  canvas.style.width  = (W*scale) + 'px';
  canvas.style.height = (H*scale) + 'px';
}
window.addEventListener('resize', fitCanvas);
window.addEventListener('orientationchange', fitCanvas);
setTimeout(fitCanvas,100);

/* High Score LocalStorage */
const SCORE_KEY = 'monsterShooterHighScore';
function getHighScore() { return parseInt(localStorage.getItem(SCORE_KEY) || '0'); }
function setHighScore(val) { localStorage.setItem(SCORE_KEY, val); }
function showHighScore(val) {
  document.getElementById('highScore').textContent = 'High Score: ' + val;
}
showHighScore(getHighScore());

/* Load Images */
const heroImg = new Image();
heroImg.src = 'https://i.ibb.co/LDhXgRJf/nve9-twbd-210520-removebg-preview.png';

const monsterImg = new Image();
monsterImg.src = 'https://i.ibb.co/N2P2nNZb/2565745-removebg-preview.png';

const bulletImg = new Image();
bulletImg.src = 'https://i.ibb.co/bR7r9Hgv/pngtree-gold-sniper-bullet-png-image-16384435-removebg-preview.png';


/* GAME LOOP */
let gameStarted = false;
let lastFrame = performance.now();
const CONTROL_HEIGHT = 120;
const SAFE_BOTTOM = H - CONTROL_HEIGHT - 6;

(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  const HERO_SIZE = 60, HERO_X = 320, HERO_Y = 560;
  const BASE_HERO_SPEED = 540;
  const BULLET_SPEED = 700;
  const BASE_MONSTER_SPEED = 140;
  const MONSTER_BULLET_SPEED = 400;

  let heroX, heroY, bullets, monsters, score, gameOver, monsterSpeed, spawnRate;
  let monsterBullets = [];
  let isMonstersFrozen = false;
  let freezeStartTime = 0;
  const FREEZE_DURATION = 5000;

  window.moveLeft=false;
  window.moveRight=false;
  window.moveUp=false;
  window.moveDown=false;
  window.mouseHeld=false;

  function reset(){
    heroX = HERO_X;
    heroY = HERO_Y;
    bullets = [];
    monsters = [];
    monsterBullets = [];
    score = 0;
    gameOver = false;
    monsterSpeed = BASE_MONSTER_SPEED;
    spawnRate = 50;
    lastFrame = performance.now();
    isMonstersFrozen = false;
    freezeStartTime = 0;
  }
  window.globalReset = reset;

  function intersect(a,b){
    return !(a.x + a.w < b.x || b.x + b.w < a.x || a.y + a.h < b.y || b.y + b.h < a.y);
  }

  window.globalGameOver = ()=>{
    stopMusic();
    gameOver = true;
    document.getElementById("retryScreen").style.display = "flex";
  };

  function draw(){
    ctx.clearRect(0, 0, W, H);

    ctx.drawImage(heroImg, heroX, heroY, HERO_SIZE, HERO_SIZE);
    bullets.forEach(b => ctx.drawImage(bulletImg, b.x, b.y, b.w, b.h));
    monsters.forEach(m => ctx.drawImage(monsterImg, m.x, m.y, m.w, m.h));
    monsterBullets.forEach(b => ctx.drawImage(bulletImg, b.x, b.y, b.w, b.h));

    ctx.fillStyle = "#fff";
    ctx.font = "22px Arial";
    ctx.fillText("Score: " + score, 20, 40);
  }

  let fireCooldown = 0;
  let monsterFireCooldown = 0;

  function tick(now){
    let dt = Math.min((now - lastFrame) / 1000, 0.04);
    lastFrame = now;

    if(!gameStarted || gameOver) { requestAnimationFrame(tick); return; }

    let heroSpeed = BASE_HERO_SPEED + score * 10;
    if(moveLeft)  heroX -= heroSpeed * dt;
    if(moveRight) heroX += heroSpeed * dt;
    if(moveUp)    heroY -= heroSpeed * dt;
    if(moveDown)  heroY += heroSpeed * dt;

    heroX = Math.max(0, Math.min(W - HERO_SIZE, heroX));
    heroY = Math.max(0, Math.min(SAFE_BOTTOM - HERO_SIZE, heroY));

    fireCooldown -= dt;
    if(mouseHeld && fireCooldown <= 0){
      bullets.push({x: heroX + HERO_SIZE / 2 - 10, y: heroY, w: 20, h: 35});
      fireCooldown = 0.11;
    }

    if(!isMonstersFrozen){
      monsterSpeed = BASE_MONSTER_SPEED + score * 5;
      spawnRate = Math.max(12, 50 - Math.floor(score / 2));
    }

    if(Math.random() * spawnRate < dt * spawnRate && !isMonstersFrozen) {
      monsters.push({x: Math.random() * (W - 40), y: 0, w: 40, h: 40});
    }

    bullets.forEach(b => b.y -= BULLET_SPEED * dt);
    bullets = bullets.filter(b => b.y > 0);

    if(score >= 40 && !isMonstersFrozen){
      isMonstersFrozen = true;
      freezeStartTime = now;
    }

    if(isMonstersFrozen){
      monsterFireCooldown -= dt;
      if(monsterFireCooldown <= 0){
        monsterFireCooldown = 0.7;
        monsters.forEach(m => {
          let bulletX = m.x + m.w / 2 - 7;
          let bulletY = m.y + m.h;
          let diffX = heroX + HERO_SIZE / 2 - bulletX;
          let speedX = diffX === 0 ? 0 : (diffX > 0 ? 150 : -150);
          monsterBullets.push({x: bulletX, y: bulletY, w: 14, h: 14, vx: speedX, vy: MONSTER_BULLET_SPEED});
        });
      }
      monsterBullets.forEach(b => { b.x += b.vx * dt; b.y += b.vy * dt; });
      monsterBullets = monsterBullets.filter(b => b.y < H && b.x > 0 && b.x < W);
      if(now - freezeStartTime > FREEZE_DURATION){
        isMonstersFrozen = false;
        monsterBullets = [];
      }
    } else {
      for(let m = monsters.length - 1; m >= 0; m--){
        monsters[m].y += monsterSpeed * dt;
        if(monsters[m].y > H) window.globalGameOver();
      }
      monsterBullets = [];
    }

    for(let bi = bullets.length - 1; bi >= 0; bi--){
      let b = bullets[bi];
      let hitIndex = -1;
      for(let mi = 0; mi < monsters.length; mi++){
        if(intersect(b, monsters[mi])){
          hitIndex = mi;
          break;
        }
      }
      if(hitIndex >= 0){
        monsters.splice(hitIndex, 1);
        bullets.splice(bi, 1);
        score++;
      }
    }

    for(let bi = monsterBullets.length - 1; bi >= 0; bi--){
      let b = monsterBullets[bi];
      let heroRect = {x: heroX, y: heroY, w: HERO_SIZE, h: HERO_SIZE};
      if(intersect(b, heroRect)){
        window.globalGameOver();
      }
    }

    if(score > getHighScore()){
      setHighScore(score);
      showHighScore(score);
    }

    draw();
    requestAnimationFrame(tick);
  }

  reset();
  requestAnimationFrame(tick);
})();

/* -------------------------
      MOBILE BUTTONS
   ------------------------- */
function bind(id, down, up){
  const el = document.getElementById(id);
  el.addEventListener("pointerdown", e => { e.preventDefault(); down(); });
  el.addEventListener("pointerup", e => { e.preventDefault(); up(); });
  el.addEventListener("pointerleave", e => { e.preventDefault(); up(); });
}
bind("left", () => moveLeft = true, () => moveLeft = false);
bind("right", () => moveRight = true, () => moveRight = false);
bind("up", () => moveUp = true, () => moveUp = false);
bind("down", () => moveDown = true, () => moveDown = false);
bind("fireBtn", () => mouseHeld = true, () => mouseHeld = false);

/* -------------------------
      PC KEYBOARD CONTROLS
   ------------------------- */
document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft") moveLeft = true;
  if (e.key === "ArrowRight") moveRight = true;
  if (e.key === "ArrowUp") moveUp = true;
  if (e.key === "ArrowDown") moveDown = true;
});

document.addEventListener("keyup", (e) => {
  if (e.key === "ArrowLeft") moveLeft = false;
  if (e.key === "ArrowRight") moveRight = false;
  if (e.key === "ArrowUp") moveUp = false;
  if (e.key === "ArrowDown") moveDown = false;
});

/* -------------------------
      PC MOUSE SHOOT
   ------------------------- */
document.addEventListener("mousedown", () => {
  mouseHeld = true;
});
document.addEventListener("mouseup", () => {
  mouseHeld = false;
});

/* START & RETRY */
document.getElementById("startBtn").onclick = () => {
  document.getElementById("startScreen").style.display = "none";
  gameStarted = true; 
  globalReset();
  fitCanvas();
  playMusic();
};

document.getElementById("retryBtn").onclick = () => {
  document.getElementById("retryScreen").style.display = "none";
  gameStarted = true; 
  globalReset();
  fitCanvas();
  playMusic();
};

</script>
</body>
</html>
